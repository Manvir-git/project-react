{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminPortal=()=>{const[pumps,setPumps]=useState([]);const[newPump,setNewPump]=useState({name:'',price:'',link:''});const[image,setImage]=useState(null);const[error,setError]=useState('');// Fetch existing pumps from the backend\nuseEffect(()=>{const fetchPumps=async()=>{try{const response=await axios.get('http://localhost:5001/api/pumps');setPumps(response.data);}catch(error){console.error('Error fetching pumps:',error);setError('Failed to fetch pumps.');}};fetchPumps();},[]);// Handle image upload\nconst handleImageUpload=async e=>{const file=e.target.files[0];if(file){const formData=new FormData();formData.append('image',file);try{const response=await axios.post('http://localhost:5001/api/upload',formData);setImage(response.data.imageUrl);}catch(err){console.error('Error uploading image:',err);setError('Error uploading image.');}}};// Handle adding a new pump\nconst handleAddPump=async()=>{if(!newPump.name||!newPump.price||!newPump.link||!image){setError('Please fill all fields and upload an image.');return;}try{const pump={...newPump,image};const response=await axios.post('http://localhost:5001/api/pumps',pump);setPumps([...pumps,response.data]);setNewPump({name:'',price:'',link:''});setImage(null);setError('');}catch(err){console.error('Error adding pump:',err);setError('Error adding pump.');}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Admin Portal\"}),error&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red'},children:error}),/*#__PURE__*/_jsx(\"h2\",{children:\"Add New Pump\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Name\",value:newPump.name,onChange:e=>setNewPump({...newPump,name:e.target.value})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Price\",value:newPump.price,onChange:e=>setNewPump({...newPump,price:e.target.value})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Link\",value:newPump.link,onChange:e=>setNewPump({...newPump,link:e.target.value})}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleImageUpload}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddPump,children:\"Add Pump\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Existing Pumps\"}),pumps.map(pump=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{src:`http://localhost:5001${pump.image}`,alt:pump.name,width:\"100\"}),/*#__PURE__*/_jsx(\"p\",{children:pump.name}),/*#__PURE__*/_jsx(\"p\",{children:pump.price}),/*#__PURE__*/_jsx(\"p\",{children:pump.link})]},pump._id))]});};export default AdminPortal;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","AdminPortal","pumps","setPumps","newPump","setNewPump","name","price","link","image","setImage","error","setError","fetchPumps","response","get","data","console","handleImageUpload","e","file","target","files","formData","FormData","append","post","imageUrl","err","handleAddPump","pump","children","style","color","type","placeholder","value","onChange","onClick","map","src","alt","width","_id"],"sources":["/Users/manvirsingh/Documents/react1/project/src/components/AdminPortal.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nconst AdminPortal = () => {\n  const [pumps, setPumps] = useState([]);\n  const [newPump, setNewPump] = useState({ name: '', price: '', link: '' });\n  const [image, setImage] = useState(null);\n  const [error, setError] = useState('');\n\n  // Fetch existing pumps from the backend\n  useEffect(() => {\n    const fetchPumps = async () => {\n      try {\n        const response = await axios.get('http://localhost:5001/api/pumps');\n        setPumps(response.data);\n      } catch (error) {\n        console.error('Error fetching pumps:', error);\n        setError('Failed to fetch pumps.');\n      }\n    };\n\n    fetchPumps();\n  }, []);\n\n  // Handle image upload\n  const handleImageUpload = async (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      const formData = new FormData();\n      formData.append('image', file);\n\n      try {\n        const response = await axios.post('http://localhost:5001/api/upload', formData);\n        setImage(response.data.imageUrl);\n      } catch (err) {\n        console.error('Error uploading image:', err);\n        setError('Error uploading image.');\n      }\n    }\n  };\n\n  // Handle adding a new pump\n  const handleAddPump = async () => {\n    if (!newPump.name || !newPump.price || !newPump.link || !image) {\n      setError('Please fill all fields and upload an image.');\n      return;\n    }\n\n    try {\n      const pump = { ...newPump, image };\n      const response = await axios.post('http://localhost:5001/api/pumps', pump);\n      setPumps([...pumps, response.data]);\n      setNewPump({ name: '', price: '', link: '' });\n      setImage(null);\n      setError('');\n    } catch (err) {\n      console.error('Error adding pump:', err);\n      setError('Error adding pump.');\n    }\n  };\n\n  return (\n    <div>\n      <h1>Admin Portal</h1>\n\n      {error && <div style={{ color: 'red' }}>{error}</div>}\n\n      <h2>Add New Pump</h2>\n      <input\n        type=\"text\"\n        placeholder=\"Name\"\n        value={newPump.name}\n        onChange={(e) => setNewPump({ ...newPump, name: e.target.value })}\n      />\n      <input\n        type=\"text\"\n        placeholder=\"Price\"\n        value={newPump.price}\n        onChange={(e) => setNewPump({ ...newPump, price: e.target.value })}\n      />\n      <input\n        type=\"text\"\n        placeholder=\"Link\"\n        value={newPump.link}\n        onChange={(e) => setNewPump({ ...newPump, link: e.target.value })}\n      />\n      <input type=\"file\" onChange={handleImageUpload} />\n      <button onClick={handleAddPump}>Add Pump</button>\n\n      <h2>Existing Pumps</h2>\n      {pumps.map((pump) => (\n        <div key={pump._id}>\n          <img src={`http://localhost:5001${pump.image}`} alt={pump.name} width=\"100\" />\n          <p>{pump.name}</p>\n          <p>{pump.price}</p>\n          <p>{pump.link}</p>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default AdminPortal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}